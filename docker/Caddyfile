learnlm-mcp.{$DOMAIN} {
    reverse_proxy mcp-server:3000 {
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }

    tls {
        alpn http/1.1
    }

    log {
        format json
    }
}

mcp.{$DOMAIN} {
    reverse_proxy mcp-server:3000 {
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }

    tls {
        alpn http/1.1
    }

    log {
        format json
    }
}
